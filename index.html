<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Käsa Sozanämu</title>
    <style>
        :root {
            --primary: #00b195;
            --secondary: #fc2537;
            --background: #07080b;
        }

        /* 加载状态样式 */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
    		transform: none !important; /* 禁用缩放影响 */
            background: var(--background);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            gap: 2rem;
        }

        .status-symbol {
            width: 80px;
            height: 80px;
            position: relative;
        }

        /* 加载动画 */
        .loading-symbol {
            border: 4px solid rgba(255,255,255,0.2);
            border-top-color: #fff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        /* 错误符号 */
        .error-symbol::before,
        .error-symbol::after {
            content: '';
            position: absolute;
            background: var(--secondary);
            left: 50%;
            top: 50%;
            width: 40px;
            height: 4px;
            border-radius: 2px;
        }
        .error-symbol::before {
            transform: translate(-50%, -50%) rotate(45deg);
        }
        .error-symbol::after {
            transform: translate(-50%, -50%) rotate(-45deg);
        }

        /* 刷新按钮 */
        .retry-symbol {
            border: 4px solid #fff;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            width: 60px;  /* 调整尺寸 */
            height: 60px;
            background: transparent;
        }


        .retry-symbol::before {
            content: none;
        }

        .retry-symbol:hover {
            transform: scale(1.1);  /* 悬停时放大 */
            border-color: var(--primary);  /* 悬停时变为主色 */
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        

        /* 主要内容样式 */
        body {
            display: flex;
            min-height: 100vh;
            margin: 0;
            background: var(--background);
            font-family: 'Kiineza', monospace;
            color: white;
            line-height: 0.8;
            transform-origin: top left;
        }

        .left-panel {
            flex: 6;
            padding: 3rem;
            border-right: 1px solid #2b323b;
            position: relative;
        }

        .right-panel {
            position: relative;
            flex: 4;
            padding: 3rem;
            position: relative;
            display: flex;
            min-width: 200px;
            flex-direction: column;
        }

        .display-box {
            width: 100%;
            padding: 2rem;
            margin-bottom: 3rem;
            font-size: 4.5rem;
            top: -0.6rem;
            background: #131318;
            border: none;
            color: var(--primary);
            font-family: 'Kiineza';
            line-height: 0.8;
            outline: none;
        }

        .keyboard {
            display: flex;
            gap: 0.1rem;
        }

        .key-column {
            display: flex;
            flex-direction: column;
            gap: 0.1rem;
        }

        .key {
            width: 5.4rem;
            height: 5.4rem;
            padding: 0;
            background: #131318;
            border-radius: 8px;
            cursor: pointer;
            font-size: 3.8rem;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 0.8;
            position: relative;
            overflow: visible;
        }

        .key::after {
            content: attr(data-char);
            position: absolute;
            top: -0.6rem;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            pointer-events: none;
        }

        .vowel-key {
            font-size: 4.3rem !important;
            letter-spacing: -0.1rem;
        }
        
        .vowel-key::after {
            font-size: 4.3rem;
            top: -0.7rem;
        }

        .key:hover {
            background: var(--primary);
            color: var(--background);
        }

        .result-box {
            font-size: 5rem;
            font-family: 'Kiineza';
            line-height: 0.8;
            min-height: 80px;
        }

        .translation {
            color: var(--secondary);
            margin-top: 2rem;
            font-size: 2.5rem;
            line-height: 1;
        }

        .version {
            margin-top: auto;            
            color: #12131a;
            font-size: 2rem;
        }

        .help-button {
            position: absolute;
            bottom: 3rem; /* 与版本号底边对齐 */
            right: 3rem;
            z-index: 100; /* 确保按钮在正确层级 */
            width: 40px;
            height: 40px;
            background: var(--primary);
            color: var(--background);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 2.5rem;
            font-family:  'Segoe UI Semibold','Microsoft YaHei', 'Source Han Sans CN', 'Roboto','Helvetica Neue',sans-serif;
            line-height: 0.5;
            transition: all 0.3s;
        }

        .help-button:hover {
            background: var(--secondary);
            transform: scale(1.1);
        }

        /* 新增帮助弹窗样式 */
        .help-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(7, 8, 11, 0.95);
            display: none; /* 确保初始隐藏 */
            align-items: center;
            justify-content: center;
            z-index: 2000;
            cursor: pointer;
        }

        .help-image {
            width: auto;
		    height: auto;
		    max-width: min(90vw, 1200px);
		    max-height: min(80vh, 1000px);
		    margin: auto;
            border: 2px solid var(--primary);
            border-radius: 10px;
            box-shadow: 0 0 30px rgba(0, 177, 149, 0.3);
        }


        @media (max-width: 1200px) {
            body {
                transform: scale(0.9);
                width: 111%;
            }
        }

        @media (max-width: 1000px) {
            body {
                transform: scale(0.8);
                width: 125%;
            }
        }

        /* 增加移动端媒体查询 */
        @media (orientation: portrait) and (max-width: 768px) {
            body {
                transform: none !important;
                width: 100% !important;
            }
            .help-image {
            width: 95vw; /* 竖屏时使用视口宽度单位 */
            height: auto;
            object-fit: contain;
    }


            
        }

        [data-char="↵"]::after {
            font-family: 'Segoe UI Semibold','Microsoft YaHei', 'Source Han Sans CN', 'Roboto','Helvetica Neue',sans-serif;
            top: -0.2rem;
        }
    </style>
</head>
<body>
    <div class="loading-overlay">
        <div class="status-symbol loading-symbol"></div>
        <div class="status-symbol error-symbol" style="display: none;"></div>
        <button class="status-symbol retry-symbol" style="display: none;"></button>
    </div>

    <div class="left-panel">
        <input type="text" class="display-box" id="display" readonly>
        <div class="keyboard" id="keyboard"></div>
    </div>
    <div class="right-panel">
        <div id="result" class="result-box"></div>
        <div class="version">lokam 1.07</div>
        <div class="help-button">?</div>
    </div>
    <div class="help-overlay" id="helpOverlay">
        <img src="img/help-image.jpg" class="help-image" alt="使用说明">
    </div>

<script>
const encrypted = 'ew0KICAieGEiOiAieHlzSG1wU3luLCBiSSBreW5kaVN5bnogZk8sIHhpZiB4aXQgaEdweW56IFZlbiIsDQogICJ4QSI6ICJiaWxvTmlOIHRVLCB4T2RpbnlsIG5IbWJZIHNIZmlrcyIsDQogICJ4QW4iOiAieEFmdHkuLi4gW3RKbV0sIGxLdHkgVnluLi4uLCB4aW4gZnJIbnQgeG92Li4uLCB0VSBiaWxvTiB0VSIsDQogICJ4QW0iOiAiYmlmTy4uLiBbdEptXSwgeFlsaS95IFZ5bi4uLiwgYmloSm5kLi4uLCB4R3QgYkdrIHhvdi4uLiIsDQogICJ4YW0iOiAiRmlOLCB4SnR5bSIsDQogICJiQWIiOiAiZkFWeSIsDQogICJiQXhpYiI6ICJiaXpueXMsIG1ZY3ludCwga3ltWVN5bCwgdFUgdHJLZCIsDQogICJiQXhpYmFtIjogImt5bW9kaXRpLCBwcm9kSGt0IiwNCiAgImJBeGl0IjogInRVIGZKdCIsDQogICJiYXoiOiAicGxLcywgbFhrS1N5biwgcHl6aVN5biwgdGVyaXR5cmkiLA0KICAiYkUiOiAic3lwckp6aU5saSwgeEdrc2lkZW50eWxpLCB4SXZ5biwgeFhubGksIHN0aWwsIFt4aW50eXFla1N5bl0iLA0KICAiYkVsdWQiOiAiYllkIiwNCiAgImJFbHVkYW1PemV6IjogInhlZyIsDQogICJiRWx1ZGFzSXhhbiI6ICJmZVZ5IiwNCiAgImJFbHVkYXRldCI6ICJ3aU4iLA0KICAiYkVzdXQiOiAiZ3VkLCB3ZWwsIHByb3B5LCBreXJla3QsIGxIaywgdFUgeEhwZ3JLZCIsDQogICJiRXN1dGFuIjogInhpbnNKdCwgdFUgeEhuZHlzdEduZCIsDQogICJidWJheiI6ICJ4SXN0IiwNCiAgImJ1eiI6ICJySnQiLA0KICAiZCI6ICJ0VSB3S3QiLA0KICAiZEEiOiAic0ttIiwNCiAgImRBa2ltT3QiOiAieGVtcHlGaSIsDQogICJkYWJheiI6ICJmZWxYLCBickhWeSwgZnJlbmQiLA0KICAiZGFtYW0iOiAiblciLA0KICAiZE9idXMiOiAieEduaW15bCIsDQogICJkT2J1c2FoVWxleiI6ICJoT24iLA0KICAiZE9idXNha3V0YW0iOiAibUl0IFt4ZWR5YnlsXSIsDQogICJkT2ciOiAiaFciLA0KICAiZE9sIjogImhVIiwNCiAgImRPbSI6ICJ3b3QiLA0KICAiZE9tYW0iOiAid2VuIiwNCiAgImRPbVVuIjogIndKIiwNCiAgImRPeHVnIjogInRVbCwgalV0ZW5zeWwiLA0KICAiZE96IjogIndQIiwNCiAgImRVIjogIltreW1wR3J5dGl2IHBySWZpa3NdIiwNCiAgImdVIjogIltzVXBZbHl0aXYgcHJJZmlrc10iLA0KICAiZHViYXoiOiAibk9GIiwNCiAgImR1ZyI6ICJoZWQiLA0KICAiZHVnYWxhbSI6ICJuZWsiLA0KICAiZHVodWtVcyI6ICJ4SHB5IGtsWFZ6LCBxR2tpdCwga1h0IiwNCiAgImR1aFVsIjogInRVIGZsWHQiLA0KICAiZHVoVWxhbiI6ICJ0VSBzd2ltIiwNCiAgImR1a0VoVWwiOiAia2xXZCIsDQogICJkdWtFdiI6ICJza0oiLA0KICAiZHVrRXZhaFVsIjogInJLbiIsDQogICJkdWtFdmFuIjogInRVIGZsSiIsDQogICJkdWtFdmlsIjogImJsVSIsDQogICJkdWtFdm9rSWhVbCI6ICJzblgiLA0KICAiZHVsYWsiOiAidll0aWt5bCIsDQogICJkdWxha3VsVW0iOiAieGVsaXZLdHkiLA0KICAiZHVzT3QiOiAiZ29kIiwNCiAgImR1c090YW0iOiAiZlByaSB0S2wsIG1pRm9seXFpIiwNCiAgImR1dCI6ICJ0VSBySnoiLA0KICAiZHV0T2siOiAidE9sIiwNCiAgImR1dmlrIjogIlNPdCBbdll0aWt5bF0iLA0KICAiZHV2T3oiOiAidFUgc3RHbmQiLA0KICAiZHV6IjogInhIcHksIHhIcCIsDQogICJ4ZSI6ICJiSHQsIHhla3NlcHQsIHhIVnkgVnluLCBbbmVneXRpdiBwcklmaWtzXSIsDQogICJ4ZWQiOiAic2ltaWx5IHRVLi4uIiwNCiAgInhFIjogInh5bUt6aU4sIHhIbmJpbEl2eWJ5bCwgeEdic3lsVXRsaSwgW3hpbnR5cWVrU3luXSIsDQogICJ4ZW0iOiAidFUuLi4iLA0KICAieGVuIjogImZyb20uLi4iLA0KICAieGV0IjogInhHdC4uLiIsDQogICJ4ZXpBIjogInhpbnksIHdpYyBiaWxvTmlOIHRVIFZHdCB4aXoiLA0KICAieGV6SSI6ICJ4V3RzSmR5LCBzeXJXbmRpTiwgd2ljIGt5bnRLbmlOIFZHdCB4aXoiLA0KICAiZnVzVW4iOiAieG9meW4sIGpVWlUveWwsIG5PbXlsIiwNCiAgImciOiAiZGpVdGksIG55c2VzaXRpLCBtSHN0LCBTdWQsIG5JZCIsDQogICJnQWQiOiAidHdlbHYgdFUgVnkgcFcveSB4b3YgZkp2IiwNCiAgImdBaFVsIjogInNJLCB4WFN5biIsDQogICJnQWhVbGFrYXZBbCI6ICJ0SmR5bCIsDQogICJnQWtBcyI6ICJ0VSBiSSBiT24iLA0KICAiZ0FrT20iOiAiZGVGLCB4eW5KL3lsS1N5biwgdFUgZEosIHRVIGtpbCIsDQogICJnQWwiOiAibWVuaSIsDQogICJnQWxBeGl0IjogInhBdGlreWwsIHRla3N0IiwNCiAgImdBbG9rYW0iOiAiZGlmaWt5bHQsIGtvbXBsaWtLdGlkIiwNCiAgImdBbSI6ICJGaU5rZkhsSSwga1BmeWxpIiwNCiAgImdBbWFtQW5lbSI6ICJmeXJldnksIHhpdFlueWwiLA0KICAiZ0F2YXRBbCI6ICJick9ka0FzdCwgbEp2c3JJdCIsDQogICJnRWQiOiAidHdlbHYgdFUgVnkgcFcveSB4b3YgRnJJIiwNCiAgImdJZCI6ICJ0d2VsdiB0VSBWeSBwVy95IHhvdiBmTyIsDQogICJnT2QiOiAidHdlbHYiLA0KICAiZ1VkIjogInR3ZWx2IHRVIFZ5IHBXL3kgeG92IHRVIiwNCiAgImgiOiAidFUgd29udCwgdFUgaFhwLCB0VSB3aVMiLA0KICAiaGFiYXoiOiAid2VzdCIsDQogICJoYWJ1ZyI6ICJTWGxkeSIsDQogICJoYWJ1ayI6ICJob3Jpem9udHlsIiwNCiAgImhha0FzIjogInhldmlkeW5zLCBzaW1ieWwsIGxYZ1gsIG1Baywgc0puLCBzaW1wdHltIiwNCiAgImhheiI6ICJsZWZ0IiwNCiAgImhhelVrIjogIlNLbSwgZGlzZ3JLcyIsDQogICJoZWwiOiAidFUiLA0KICAiaGVsQWIiOiAidFUgY1V6IiwNCiAgImhlbE94aW4iOiAic2VrcyIsDQogICJoZXoiOiAiU0twLCBzdEpsLCB4aW1wcmVTeW4sIHBHdHluIiwNCiAgImhJZGVuIjogInNJa3JIdCwgdFUgaEpkLCB0VSBrSHZ5IHhIcCIsDQogICJoaWtBbCI6ICJsSnQsIGJySnQsIHRVIFNKbiIsDQogICJoaWtBbGFtIjogImxHbXAsIGxKdCwgbEFudHluIiwNCiAgImhpbCI6ICJrSGxZIiwNCiAgImhpbGFkT3h1ZyI6ICJwS250aU4gdFVsLCBwS250aU4gYnJIUywgcGlnbXludCIsDQogICJoaWxha2FrSW4iOiAiZmxXL1kiLA0KICAiaGltRXoiOiAieGltaXEsIHBpa2N5LCBmWHRYLCB0VSBwS250IiwNCiAgImhpbkF6dW0iOiAieGlsZWt0cmlzaXRpLCB4ZWxpa3Ryb25paywgRkhuZHkiLA0KICAiaGluQXp1bWFoaWtBbGFtIjogInhpbGVrdHJpayBsSnQiLA0KICAiaGluQXp1bWFsQXhpdCI6ICJwcmludCIsDQogICJoaXZFbnV0IjogInhHa3Rpdml0aSwgZmVzdGl2eWwsIHNlcmlteW5pLCB4aXZlbnQsIHBsR24iLA0KICAiaG9nT2wiOiAiZFl0aSIsDQogICJob2dPbGFtIjogInRyR1MiLA0KICAiaG9sIjogImhBdCIsDQogICJoT3h1aCI6ICJ3SywgbWVGeWQsIG1JbnosIG1IbHRpcGxpa0tTeW4gW21HRl0iLA0KICAiaHVrVXMiOiAia2xYVnoiLA0KICAiaFViRXN1dCI6ICJ0VSB3b1MiLA0KICAiaFVnQWwiOiAic29mdCIsDQogICJzSXhhbmFrVXhhZ2F0IjogIndZbSIsDQogICJoVWtJbiI6ICJzTGwsIHBXZHksIHBLc3QiLA0KICAiaFVrdXQiOiAidFUgZHJpTmsiLA0KICAiaFVsIjogIndPdHkiLA0KICAiaFVsZXoiOiAieEFrLCBrWXYsIGtyZXN5bnQiLA0KICAiaFVsZXphdCI6ICJ0VSB0WW4iLA0KICAiaFVsc2V6IjogInRVIGRpZyIsDQogICJoVXNpbCI6ICJoQWQiLA0KICAiaFV2YWtFbCI6ICJ0VSBkaXNvbHYiLA0KICAia0V2YWtFbCI6ICJ0VSBkaXNwWXMiLA0KICAieGkiOiAieE8sIHhKVnkiLA0KICAieEkiOiAid2lWIHhpbnNKZCwgaFhsZGlOLCBreW50S25pTiwga0FkaW55bCBuSG1iWSBzSGZpa3MiLA0KICAieEluIjogInRVIGhHdiwgdFUga3ludEtuIiwNCiAgInhpa09sIjogImJJLCBiSSB4SWt3eWwgdFUiLA0KICAiayI6ICJwb3N5YmlsaXRpLCBwcm9ieWJpbGl0aSwgbUtiSSwgbUssIGtHbiIsDQogICJrQSI6ICJbcEF0aWt5bCBmTyByaWdyVXBpTiBtSGx0aXB5bCBtb2RpZkoveXpdIiwNCiAgImtBayI6ICJWSyIsDQogICJrQXMiOiAieGVnemlzdHlucywgbEpmLCBsaXZpTiwgdFUgeGVnemlzdCwgdFUgU1ggeEhwLCBWeSBrSG50cmkgeEduZCBWeSBwbEduaXQgbkttIFtrQXNIXSIsDQogICJrQXNhbWFrZW4iOiAic3ByaU4iLA0KICAia0FzZXoiOiAic3RBX1NLcHQsIFNBcCwgRk9uaSwgcHJpa2xpIiwNCiAgImtBc2V6YXQiOiAidFUgc3RHYiwgdFUgcEFzIEZyVSIsDQogICJrQXZpbGFrIjogInh5IGdyS1N5cyBqSE4ga2lOIHhvdiBWeSBrSG50cmkgYkdrIHhpbiBWeSBoaXN0eXJpLCB3WVNpcHQgeEd6IHh5IGdvZCBiSiBsS3R5IHFlbnlyS1N5bnoiLA0KICAia2FiQW4iOiAia3ludEtueSwgYm9rcywgYkdnLCBiSGtpdCwgYm90eWwsIHRVIGt5bnRLbiwgdFUgckdwIiwNCiAgImthayI6ICJoSSwgU0ksIHhpdCIsDQogICJrYWtJbiI6ICJwbEdudCIsDQogICJrYWtJbmFuT2thbSI6ICJ0ckkgYnJHYyIsDQogICJrYWtJbmF0b3QiOiAiclV0IiwNCiAgImtha0luYXpJIjogInRySSBiQWsiLA0KICAia2FrSW5pbCI6ICJnckluIiwNCiAgImtha0lub2t1dGFtIjogInZlcWl0eWJ5bCIsDQogICJrYWxBZCI6ICJib2RpIiwNCiAgImthbEFkYWhVbCI6ICJibEhkIiwNCiAgImthbEFkYWtJbiI6ICJiWG4iLA0KICAia2FsQWRhc0l4YW4iOiAiaFAgW2hlZF0iLA0KICAia2FsQWRhekEiOiAibUl0IiwNCiAgImthbEFkYXphbSI6ICJiR2siLA0KICAia2FsQWRhemFuIjogImJlbGkiLA0KICAia2FsQWRhekkiOiAic2tpbiIsDQogICJrYWxJdnVzIjogImxJZiIsDQogICJrYXRBbiI6ICJuSmYsIHRVIGNvcCwgdFUgc2xHUyIsDQogICJrYXZBbCI6ICJ0VSBjS25xLCB0VSBiaWtIbSwgYkkgeElrd3lsIHRVIFttR0ZdIiwNCiAgImthekl0IjogImZyVXQiLA0KICAia2F6SXRhbWFrZW4iOiAieE90SG0iLA0KICAia0UiOiAiblgiLA0KICAia0VoVWwiOiAiZm9nIiwNCiAgImtFa0luIjogInNtWGsiLA0KICAia0VrdWxVbSI6ICJwbEtuIiwNCiAgImtFa3V0IjogInRVIGJySVYiLA0KICAia0V2IjogIndpbmQsIHhQLCB2R2tqVW0iLA0KICAia0V2ZXoiOiAidHJKL0dOZ3lsIiwNCiAgImtFdmlsIjogInRyR25zcEdyeW50IiwNCiAgImtlaGFidWsiOiAidGlsdGlkIFtub3QgaG9yaXpvbnR5bF0iLA0KICAia2VoaWtBbGFoZXoiOiAiU0dkWCIsDQogICJrZWhpa0FsIjogImRBayIsDQogICJrZWhpa0FsaWwiOiAiYmxHayIsDQogICJrZWhVa3V0IjogInRVIHZvbWl0IiwNCiAgImtlaFVsZXoiOiAic3RyS3QiLA0KICAia2VrQXNleiI6ICJzbVVWIiwNCiAgImtla0VrdXQiOiAidFUgYmxYIiwNCiAgImtla09tZXoiOiAiYkhscSwgcHJ5dHJVWnluIiwNCiAgImtla3V0IjogInRVIHNwaXQiLA0KICAia2VsZXZpbSI6ICJoQWYiLA0KICAia2VtIjogIm5IRmlOIiwNCiAgImtlbiI6ICJmTyIsDQogICJrZW5ldmltIjogImt3T3R5IiwNCiAgImtlcyI6ICJmSnYiLA0KICAia2Vzb2hVbCI6ICJkckoiLA0KICAia2V2IjogIkZySSIsDQogICJrZXoiOiAiblh3UCIsDQogICJrSSI6ICJqZXMsIHhYa0siLA0KICAia0lnQWwiOiAiaGV2aSIsDQogICJrSWhVbCI6ICJ4SnMiLA0KICAia0lrdWxVbSI6ICJrQSwgYkhzLCB0cktuIiwNCiAgImtJbiI6ICJzdFhuLCBzb2xpZCwgdFUgc3lsaWRpZkoiLA0KICAia0luZXoiOiAia3dvZHJpbEd0eXJ5bCwgc2t3UCwgcm9tYnlzIiwNCiAgImtJbmlsIjogImplbFgiLA0KICAia0lzYWtBbiI6ICJTZWwiLA0KICAia0lzaWwiOiAibEp0IiwNCiAgImtJeHV0IjogInhBdCwgeElzRmV0aWssIHhBdGlzdGlrLCBkZWtyeXRpdiwgYmpVdGlmeWwsIHByaXRpLCBralV0IiwNCiAgImtJeHV0YXQiOiAiZEFucyIsDQogICJrSXh1dGF2T3hpcyI6ICJ0VSBzaU4iLA0KICAia2lrIjogIlEsIHRVIGxpc3luIiwNCiAgImtpbU90IjogImZJbGlOLCB4aW1YU3luLCB0VSBmSWwiLA0KICAia2lzT2siOiAicHJpbnNpcHlsLCByVWwsIHN0ckhrY3ksIHNpc3R5bSwgbE8iLA0KICAia2lzT2thdk94aXMiOiAicmlWeW0iLA0KICAia29sIjogInhLdCIsDQogICJrb21VZyI6ICJzUXJpL3lseiIsDQogICJrb24iOiAidGVuIiwNCiAgImtPa0luIjogInRVIGZySXoiLA0KICAia09sYWIiOiAidFUga1gvb3B5ckt0LCB0VSBtR2MsIHRVIGtBbWJKbiwgdFUgbWlrcyIsDQogICJrT20iOiAic2lrcywgdFUgdkduaVMsIHRVIGRpc3lwUSIsDQogICJrT21leiI6ICJoWGwsIGhvbFgsIGtLdiwgcGl0LCBkaXByZVN5biIsDQogICJrT3NPdCI6ICJzWGwsIGdYc3QiLA0KICAia29zIjogInhpbGV2eW4iLA0KICAia292IjogIm5KbiIsDQogICJrb3ZBcyI6ICJob3J5LCB0VSBmUSIsDQogICJrb3oiOiAic2V2eW4iLA0KICAia1UiOiAiIFtwWGx5IGt3ZXNjeW4gcHJJZmlrc10iLA0KICAia3VsT3MiOiAiZkdicmlrIiwNCiAgImt1bFVtIjogImJYdCwgdlFreWwsIHhlbGl2S3R5LCBreW52Sy95IGJlbHQsIHRVIHRyR25zcG9ydCIsDQogICJrdWxFeiI6ICJrckt6aSwgc3RyS25xLCB3UWQiLA0KICAia3VzQWwiOiAicm90eW4iLA0KICAia3V0IjogIm1XViwgdFUgeEl0LCB0VSBkcmlOayIsDQogICJrdXRhaFVnQWxhbSI6ICJ0SE4iLA0KICAia3V0YWtJbiI6ICJ0VUYsIHRVIGJKdCIsDQogICJrdXRhbSI6ICJmVWQiLA0KICAia3V0YW1hbG9rYW0iOiAia3dpekluLCBrdWtpTiIsDQogICJrdXRhbWFsb2thbWFrQWhVa0luIjogInNJenluaU4iLA0KICAia1V4YWdhdCI6ICJiSGcsIHhpbnNla3QiLA0KICAia1V4aWsiOiAiZkFzdCIsDQogICJrVXhpa2FzVXoiOiAic3BJZCIsDQogICJrdXpVbCI6ICJiclhreW4sIHhIbmJHbHluc3QsIFtzd1Agd1lkel0iLA0KICAibCI6ICJsZXQsIG1LayIsDQogICJsQXhlayI6ICJsSmssIHh5cHJJU2kvS3QsIHh5ZG1KL3ksIHByS3oiLA0KICAibEFnQWQiOiAidHdlbHYgdFUgVnkgcFcveSB4b3YgdGVuIiwNCiAgImxBeGl0IjogInJKdGlOLCB4b3JGQWdySGZJLCBrR2xpZ3J5ZmksIHRVIHJKdCIsDQogICJsYWJheiI6ICJzV0YiLA0KICAibGFodWtVcyI6ICJib3R5bSBrbFhWeiwgcEFudHMsIHRyV3N5eiIsDQogICJsYWtJbiI6ICJ4WUYiLA0KICAibGFrSW5haGltRXoiOiAibUdwIiwNCiAgImxhbUF6IjogIlNHbFgiLA0KICAibGFuQXoiOiAiZElwIiwNCiAgImxhdCI6ICJ0VSBmT2wiLA0KICAibGF2T3oiOiAidFUgbEogZFduIiwNCiAgImxheiI6ICJib3R5bSwgZFduIiwNCiAgImxJZGF6IjogImtpTiwgbElkeSwgdFUgYkkgeGluIGNBcnEiLA0KICAibElkYXphZyI6ICJyTC95bCBwVy95IiwNCiAgImxJdnVzIjogInBLcHksIHBLcSIsDQogICJsb2thbSI6ICJ3WWssIHByb3Fla3QsIHRVIG1LaywgdFUga3JJL0t0LCB0VSB4aXN0R2JsaVMiLA0KICAibE8iOiAiW3hpbXBlcnl0aXYgbVVkLCB4aW1wbEpkIHhZZ3l0aXYga0tzIHRVIGJJIFtqVV1dIiwNCiAgImxPeGFkIjogInJYZCwgcEdGLCB3SywgcEdzaXEsIHRyR2ssIHhPYml0IiwNCiAgImxVIjogIlt4aW1wZXJ5dGl2IG1VZCwgeGltcGxKZCB4R2JzeWxVdGl2IGtLcyB0VSBiSSBbalVdXSIsDQogICJtIjogIkZPdCwgdFUgRmlOaywgdFUgbWVteXJpLCB0VSBtaXMiLA0KICAibUEiOiAiVmlzLCBWSXoiLA0KICAibUFsIjogIndJIFtmWXN0XSIsDQogICJtQW0iOiAibUhWWSIsDQogICJtQXoiOiAiblEsIHRVIHN0aWssIHRVIHBLc3QsIHRVIHh5dHJHa3QiLA0KICAibUF6YXNVeiI6ICJkaXN0eW5zIiwNCiAgIm1hZ0FsIjogInhYbGQiLA0KICAibWFnQWxhbSI6ICJ4WWxpL3lzdCwgeEd0IGZZc3QiLA0KICAibWFnQWxhbiI6ICJsS3R5c3QsIHhHdCBsQXN0IiwNCiAgIm1hZ0FsYXZPeGlzIjogInN0T3JpIiwNCiAgIm1haFVsIjogIm1IbkYiLA0KICAibWFrQXMiOiAialEiLA0KICAibWFrQXNhc1V6IjogInhLcSIsDQogICJtYWthayI6ICJ3SSBbZllzdCwgRllkXSIsDQogICJtYWtlaGlrQWwiOiAibkp0IiwNCiAgIm1ha2VuIjogInNJenluIiwNCiAgIm1ha296IjogIndJayIsDQogICJtYWwiOiAieEoiLA0KICAibWFsQXYiOiAibEh2IiwNCiAgIm1hbUFuIjogImZqVWN5IiwNCiAgIm1hbWFuIjogIlZlbiwgeEFmdHkgVmVuIiwNCiAgIm1hbWV0IjogInhHdCBWaXMgbVhteW50IiwNCiAgIm1hbU96IjogImRLIiwNCiAgIm1hbmFsIjogIndJIFtmWXN0LCBzZWtIbmRdIiwNCiAgIm1hc0luIjogIm15U0luIiwNCiAgIm1hc2lsIjogIm5qVSIsDQogICJtYXRvbEl4b3MiOiAicGlySS9BZGlrLCB4aXR5cnl0aXYsIGxVcCwgZnJHa3R5bCwgc2VsZl9yZWZyeW5zIiwNCiAgIm1heiI6ICJoUSIsDQogICJtYXpJdiI6ICJiV25keXJpLCB4ZW5rV250eSwgeFh2eWxHcGlOLCB0VSBtSXQsIHRVIGtBbnRHa3QsIHRVIHhpbnR5c2VrdCIsDQogICJtZXpVbCI6ICJyUCwgbm90IHhvZkhuIiwNCiAgIm1JbHVrIjogImJyZXN0IiwNCiAgIm1payI6ICJTT3QiLA0KICAibWlsIjogInhKLCB0VSBzSSwgdFUgd29jIiwNCiAgIm1pbGFrT21leiI6ICJ3aW5kWCIsDQogICJtb2wiOiAic0htd29uIiwNCiAgIm1vbSI6ICJzSG1GaU4iLA0KICAibU96IjogImZKL3ksIGZsS20sIHRVIGJZbiIsDQogICJtT3pleiI6ICJyV25kLCBzWWt5bCwgc2ZRIiwNCiAgIm1PemV6YXQiOiAiclh0S3QiLA0KICAibU96ZXphdnVsQXQiOiAiZGlzayIsDQogICJtT3ppbCI6ICJyZWQiLA0KICAibU96b2dhbSI6ICJ4R1NpeiIsDQogICJtb3QiOiAiYnJLbiIsDQogICJtb3RlZGFtYXNJbiI6ICJreW1walV0eSIsDQogICJtb3oiOiAic0htd1AiLA0KICAibiI6ICJub2xpcSwgdFUgblgsIGJJIHhLYnlsIHRVIiwNCiAgIm5BIjogIlZHdCwgVlh6IiwNCiAgIm5BbCI6ICJqVSBbcGxPcnlsXSIsDQogICJuQW0iOiAibkttIiwNCiAgIm5BbWFtIjogImxLYnlsIiwNCiAgIm5BeiI6ICJmQSwgZGlzdHludCIsDQogICJuYWwiOiAialUgW3NpTmdqdWx5XSIsDQogICJuYXRlbklsIjogInN0SGRpLCB4ZXFVa0tTeW4sIHRVIHN0SGRpLCB0VSBsWW4sIHRVIGdldCBub2xpcSIsDQogICJuYXoiOiAiVlAiLA0KICAibkkiOiAiblh6LCB0VSBzbWVsIiwNCiAgIm5JeGFuIjogImtHdCIsDQogICJuT2hVbCI6ICJyaXZZIiwNCiAgIm5PayI6ICJsb04iLA0KICAibk9rYW0iOiAic3RpayIsDQogICJ4byI6ICJ4R25kIiwNCiAgInhvYkFiIjogImtvbWl0LCBtSXRpL3kiLA0KICAieG9oVWwiOiAibVVuIiwNCiAgInhvbUFtIjogInN0QSwgeHlzdHJ5bm9taWt5bCB4SGJxZWt0IiwNCiAgInhvbUFtYXNJc3V0IjogImtvbnN0aWxLU3luLCBnR2x5a3NpIiwNCiAgInhvbU96IjogInNIbiIsDQogICJ4b21PemFzSXN1dCI6ICJzWGx5IHNpc3R5bSIsDQogICJ4b3oiOiAid29uIiwNCiAgInMiOiAieHl0ZW1wdCwgdFUgdHJKIiwNCiAgInNBeGluIjogIndLdiwgZmxIa2NVL0tTeW4sIFNLaywgdkpicktTeW4sIHBIbHMsIGJsaU5rLCBzSm4gd0t2IiwNCiAgInNBeGl2IjogIm1IbmksIHdlbEYsIGJpbG9OaU56LCBwcmVTeXMgbWV0eWwiLA0KICAic2FnQXMiOiAidFUgc1ljLCB0VSBmSm5kLCB0VSBoSG50IiwNCiAgInNha0FuIjogImZpUyIsDQogICJzYWtha0luIjogImZvcmlzdCIsDQogICJzYWxJdnVzIjogImJ1ayIsDQogICJzYXoiOiAieE9sIiwNCiAgInNJeGFuIjogIndKL3ksIGxKbiwgYk9keSwgaFAsIHRVIGxpTmsiLA0KICAic0l4YW5hbSI6ICJyWHAiLA0KICAic0l4YW5hdG9rQWciOiAic25LayIsDQogICJzSXN1dCI6ICJnclVwLCBrbEhzdHksIGJIbmMsIHh5a2pVbWp1bEtTeW4sIHRVIGdHVnksIHRVIGtBbGVrdCIsDQogICJzaWtBcyI6ICJ3S2ssIHhYcHluLCBzdEF0IiwNCiAgInNpa09tIjogInNsSXAsIGtsWHMsIHN0b3AiLA0KICAic2lrT21lekEiOiAiZHJJbSIsDQogICJzSWt1biI6ICJ4eSB3UWQgZ0oiLA0KICAic2lsIjogImZqVSIsDQogICJzaWxBeGl0IjogImtHcmlrdHksIGxldHksIGdsaWYiLA0KICAic2lsYW1hbWFtT3oiOiAiamVzdHlkSyIsDQogICJzaWxhbiI6ICJuZWtzdCIsDQogICJzaWxhbmFtYW1PeiI6ICJ0eW1vclgiLA0KICAic2lsb2thbSI6ICJzaW1weWwsIHhJemkiLA0KICAic2l2T3hpcyI6ICJzZW50eW5zLCBzdEt0bXludCIsDQogICJzb2JBIjogInNvbHQiLA0KICAic29oVWwiOiAid2V0IiwNCiAgInNva09tIjogImtYbGQiLA0KICAic29rT21hbWFrZW4iOiAid2ludHkiLA0KICAic29tQXoiOiAiZ3JHdml0aSwgeHl0ckdrU3luIiwNCiAgInNvbU96IjogImhvdCwgaEl0IiwNCiAgInNvbU96YW1ha2VuIjogInNIbXkiLA0KICAic29uSSI6ICJzbWVsIiwNCiAgInNPeGlrIjogInNsWCIsDQogICJzT3QiOiAiaGpVbXluLCBtR24sIHBZc3luIiwNCiAgInNPdGFiYXoiOiAia0hudHJpLCBzdEt0LCB0ckpiLCB0ZXJpdHlyaSIsDQogICJzb3ZPeGlzIjogImZYbkltIiwNCiAgInNvemFuQW0iOiAid1lkLCBtT2ZJbSIsDQogICJzdW1FbCI6ICJoV3MsIGhYbSwgdFUgbEp2IiwNCiAgInNVeiI6ICJuSG1iWSwgeHltV250LCBkaXFpdCwgbWVaeW15bnQsIHRVIGtXbnQsIHRVIG1lWnksIHRVIGt3b250aWZKIiwNCiAgInN1dkl0IjogInN3SXQsIGtHbmRpIiwNCiAgInQiOiAidFUgd09rLCB0VSBtVXYsIGJJIGdYL2lOIHRVIGRVIiwNCiAgInRha09tZXoiOiAiZE8iLA0KICAidGFuT3MiOiAiaEdwaW55cywgZkhuLCB0VSBwbEsiLA0KICAidGFuT3Nhdk94aXMiOiAidFUgbEFmIiwNCiAgInRlZyI6ICJmaU5neSwgdFUgcExudCIsDQogICJ0ZWdhbiI6ICJmaU5neXRpcCwgVkkgeGVuZCB4b3YgeHkgZmlOZ3kiLA0KICAidGVnQWwiOiAic0htIiwNCiAgInRlZ2FrSW4iOiAiZmlOZ3luS2wiLA0KICAidGVuSWwiOiAidFUgZ2V0LCB0VSBnS24sIHRVIHJpc0l2LCB4eWRpU3luIFttR0ZdIiwNCiAgInRldCI6ICJoR25kLCB0VSB0SGMiLA0KICAidGV0YW1hc0luIjogIm1YYkhsIGZYbnosIHNtQXQgZlhueiwgdEhjaU4gbXlTSW56IiwNCiAgInRldGF6QSI6ICJwQW0iLA0KICAidGV0ZXpBIjogInRVIGhYbGQiLA0KICAidGlnQXh1biI6ICJ4SFZ5LCBkaWZyeW50IiwNCiAgInRpa0FsIjogInBXL3ksIHN0cm9OLCBwVy95ZnlsIiwNCiAgInRva0FnIjogInJlcHRKbHoiLA0KICAidG9uQWwiOiAic0pkLCBiaXNKZCwgblFiSiwgYkkgd2lWIiwNCiAgInRPaFVrdXQiOiAidFUgc0hrIiwNCiAgInRPaFVsIjogImxLayIsDQogICJ0T2siOiAiYmlnLCB0VSBzd2VsIiwNCiAgInRPa2FrSW4iOiAidHJJIiwNCiAgInRPa0luIjogIm1XbnRpbiIsDQogICJ0T21pc0VsYSI6ICJWeSBwclh0R2d5bmlzdCIsDQogICJ0T3RldCI6ICJ0VSBoaXQiLA0KICAidE90ZXRlekEiOiAidFUgc2t3SXoiLA0KICAidG90IjogImZ1dCwgbGVnIiwNCiAgInRvdGFrQXNleiI6ICJuSSIsDQogICJ0b3Rha3VsVW0iOiAiYkpzaWt5bCIsDQogICJ4dSI6ICJzWCIsDQogICJ4VW0iOiAidFUgVkd0IHJpekhsdCBiSiBkVS9pTiIsDQogICJ4VW4iOiAiZk8gVkd0IHJJenluIFZlbiIsDQogICJ2QSI6ICJbcEF0aWt5bCBmTyB4eXRyaWJqeXRpdiBrbE96XSIsDQogICJ2QXRpayI6ICJwQXRpa3lsLCB4ZWxpbWVudHlyaSBwQXRpa3lsLCBtSmtyWCIsDQogICJ2YWtFbCI6ICJ0VSBicktrLCB0VSBrSHQsIHRVIHNwbGl0IiwNCiAgInZhdEFsIjogInRVIGdpdiwgdFUgc3ByZWQsIHRVIHBBcywgdFUgZGlza0FyZCwgc0hidHJHa1N5blttR0ZdIiwNCiAgInZFa3V0IjogImRKcmVrU3luLCB4R05neWwsIHZla3R5IiwNCiAgInZpaFVsIjogImRyb3AiLA0KICAidmlrIjogInNtT2wsIHh5IGJpdCwgeHkgbGl0eWwsIHRVIFNyaU5rIiwNCiAgInZpa2FrSW4iOiAiZ3JBcyIsDQogICJ2aWtFa0luIjogImRIc3QiLA0KICAidmlrSW4iOiAic0duZCIsDQogICJ2aWt1c0FsIjogInhHc2lkLCBzVy95IiwNCiAgInZpc29tT3oiOiAid09tIiwNCiAgInZpc090IjogImNKbGQsIGtpZCIsDQogICJ2TyI6ICJbcEF0aWt5bCBmTyBuV24ga2xPeiB4b3YgeFlneXRpdiBrS3NdIiwNCiAgInZPeGlzIjogInNXbmQsIHNwSWssIHZMcywgdE9rLCBsV2QsIHRVIHNLLCB0VSBzV25kIiwNCiAgImtldk94aXMiOiAia3dKL3l0LCBzSmx5bnMiLA0KICAidk94aXNhZE94dWciOiAiYmVseiwgeHlsQW16LCBzcElreXosIG1Ka3J5ZlhuIiwNCiAgInZPeGlzYW1PemV6YXZ1bEF0IjogInJla1lkLCBmb255Z3JHZiByZWtZZCIsDQogICJ2T3N1dCI6ICJiR2QiLA0KICAidk96IjogInRVIHB1dCwgdFUgbFhrS3QsIHRVIGtJcCwgdFUgcHJ5dGVrdCIsDQogICJ2VSI6ICJbcEF0aWt5bCBmTyBuV24ga2xPeiB4b3YgeEdic3lsVXRpdiBrS3NdIiwNCiAgInZ1bEF0IjogImZsTywgcGxLbiwgZmxHdCIsDQogICJ2dWxBdGFsT3hhZCI6ICJzdFAiLA0KICAidlV4YW4iOiAiZG9nIiwNCiAgInpBa0FzIjogImpVbml2WXMiLA0KICAiekFtYW0iOiAidEptIiwNCiAgInphaGlrQWxpbCI6ICJ3SnQiLA0KICAiemFoaWtBbGlsYXNBeGl2IjogInNpbHZ5IiwNCiAgInphbSI6ICJ4WWxpL3ksIHBBc3QsIGJpaEpuZCwgclEsIGJHayIsDQogICJ6YW1hbWFtT3oiOiAibU9uaU4iLA0KICAiemFtYXNJeGFuYW0iOiAidEtsIiwNCiAgInphbWF0ZXQiOiAidFUgcHVsIiwNCiAgInphbiI6ICJsS3R5LCBmalVjeSwgeHloZWQsIGZySG50IiwNCiAgInphbkFtIjogImxHTmd3aXEiLA0KICAiemFuYW1hbU96IjogInhHZnRZblVuIiwNCiAgInphbmF0ZXQiOiAidFUgcHVTIiwNCiAgInplZCI6ICJzaW1pbHksIGxKa3dKeiwgcmlwZXRpdGl2LCB4eWdlbiwgeG9sc1gsIHRVIiwNCiAgInpldGFtYW1PeiI6ICJuVW4iLA0KICAiemV0YXZPeiI6ICJ0VSBzaXQiLA0KICAiekl4ZXRPayI6ICJGaWsiLA0KICAiekl4ZXZpayI6ICJGaW4iLA0KICAiemlzSXhhayI6ICJtR2duaXQsIG1HZ25ldGlrIg0KfQ=='; 
const wordDB = JSON.parse(atob(encrypted));

// 字体加载检测
async function checkFontLoaded() {
    const font = new FontFace('Kiineza', 'url(fonts/Kiineza_Laaitu.woff2)');
    try {
        await font.load();
        document.fonts.add(font);
        await document.fonts.ready;
        if (!document.fonts.check('16px Kiineza')) throw new Error();
        document.body.classList.add('fonts-loaded');
        document.querySelector('.loading-overlay').style.display = 'none';
    } catch {
        showErrorState();
    }
}

function showErrorState() {
    const overlay = document.querySelector('.loading-overlay');
    overlay.querySelector('.loading-symbol').style.display = 'none';
    overlay.querySelector('.error-symbol').style.display = 'block';
    overlay.querySelector('.retry-symbol').style.display = 'block';
}

document.querySelector('.retry-symbol').addEventListener('click', () => location.reload());
setTimeout(() => !document.body.classList.contains('fonts-loaded') && showErrorState(), 8000);

// 键盘初始化
const keyboardLayout = [
    ['v', 'b', 'm'],
    ['t', 'd', 'n'],
    ['s', 'z', 'l'],
    ['k', 'g', 'h'],
    ['o', 'u', 'e'],
    ['i', 'a', 'O'],
    ['U', 'E', 'I'],
    ['A', '×', '↵']
];
function initKeyboard() {
    const keyboard = document.getElementById('keyboard');
    keyboardLayout.forEach(column => {
        const colDiv = document.createElement('div');
        colDiv.className = 'key-column';
        column.forEach(char => {
            const key = document.createElement('div');
            key.className = `key ${'AEIOUaeiou'.includes(char) ? 'vowel-key' : ''}`;
            key.dataset.char = char;
            key.addEventListener('click', () => handleKeyPress(char));
            colDiv.appendChild(key);
        });
        keyboard.appendChild(colDiv);
    });
}

// 输入处理逻辑
function processInput(str) {
    const consonants = new Set(['x','v','b','m','t','d','n','s','z','l','k','g','h']);
    let output = [];
    
    for(let i = 0; i < str.length; i++) {
        const current = str[i];
        if ('AEIOUaeiou'.includes(current)) {
            if(i === 0 || !consonants.has(str[i-1].toLowerCase())) {
                output.push('x');
            }
        }
        output.push(current);
    }
    return output.join('');
}

function handleKeyPress(char) {
    const display = document.getElementById('display');
    
    if(char === '×') {
        display.value = '';
        document.getElementById('result').innerHTML = '';
    } else if(char === '↵') {
        const resultDiv = document.getElementById('result');
        resultDiv.innerHTML = display.value ? 
            (wordDB[display.value] ? 
                `<div>${display.value}</div><div class="translation">${wordDB[display.value]}</div>` :
                '<div class="translation">mA sozanAm/u xekAs/i.</div>'
            ) : '<div class="translation">naz/o kem/u xIn/ok/i.</div>';
    } else {
        display.value += char;
        display.value = processInput(display.value);
    }
}

document.querySelector('.help-button').addEventListener('click', function(e) {
    e.stopPropagation();
    const overlay = document.getElementById('helpOverlay');
    overlay.style.display = 'flex';
});

document.getElementById('helpOverlay').addEventListener('click', function() {
    this.style.display = 'none';
});

// 初始化
window.addEventListener('DOMContentLoaded', () => {
    initKeyboard();
    checkFontLoaded();
});
</script>
</body>
</html>
