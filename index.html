<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Käsa Sozanämu</title>
    <style>
        :root {
            --primary: #00b195;
            --secondary: #fc2537;
            --background: #07080b;
        }

        /* 加载状态样式 */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
    		transform: none !important; /* 禁用缩放影响 */
            background: var(--background);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            gap: 2rem;
        }

        .status-symbol {
            width: 80px;
            height: 80px;
            position: relative;
        }

        /* 加载动画 */
        .loading-symbol {
            border: 4px solid rgba(255,255,255,0.2);
            border-top-color: #fff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        /* 错误符号 */
        .error-symbol::before,
        .error-symbol::after {
            content: '';
            position: absolute;
            background: var(--secondary);
            left: 50%;
            top: 50%;
            width: 40px;
            height: 4px;
            border-radius: 2px;
        }
        .error-symbol::before {
            transform: translate(-50%, -50%) rotate(45deg);
        }
        .error-symbol::after {
            transform: translate(-50%, -50%) rotate(-45deg);
        }

        /* 刷新按钮 */
        .retry-symbol {
            border: 4px solid #fff;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            width: 60px;  /* 调整尺寸 */
            height: 60px;
            background: transparent;
        }


        .retry-symbol::before {
            content: none;
        }

        .retry-symbol:hover {
            transform: scale(1.1);  /* 悬停时放大 */
            border-color: var(--primary);  /* 悬停时变为主色 */
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        

        /* 主要内容样式 */
        body {
            display: flex;
            min-height: 100vh;
            margin: 0;
            background: var(--background);
            font-family: 'Kiineza', monospace;
            color: white;
            line-height: 0.8;
            transform-origin: top left;
        }

        .left-panel {
            flex: 6;
            padding: 3rem;
            border-right: 1px solid #2b323b;
            position: relative;
        }

        .right-panel {
            position: relative;
            flex: 4;
            padding: 3rem;
            position: relative;
            display: flex;
            min-width: 200px;
            flex-direction: column;
        }

        .display-box {
            width: 100%;
            padding: 2rem;
            margin-bottom: 3rem;
            font-size: 5.4rem;
            top: -0.6rem;
            background: #131318;
            border: none;
            color: var(--primary);
            font-family: 'Kiineza';
            line-height: 0.8;
            outline: none;
        }

        .keyboard {
            display: flex;
            gap: 0.1rem;
        }

        .key-column {
            display: flex;
            flex-direction: column;
            gap: 0.1rem;
        }

        .key {
            width: 5.4rem;
            height: 5.4rem;
            padding: 0;
            background: #131318;
            border-radius: 8px;
            cursor: pointer;
            font-size: 4.2rem;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 0.8;
            position: relative;
            overflow: visible;
        }

        .key::after {
            content: attr(data-char);
            position: absolute;
            top: -0.7rem;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            pointer-events: none;
        }

        .vowel-key {
            font-size: 5.6rem !important;
            letter-spacing: -0.1rem;
        }
        
        .vowel-key::after {
            font-size: 5.6rem;
            top: -0.8rem;
        }

        .key:hover {
            background: var(--primary);
            color: var(--background);
        }

        .result-box {
            font-size: 6.5rem;
            font-family: 'Kiineza';
            line-height: 0.8;
            min-height: 80px;
        }

        .translation {
            color: var(--secondary);
            margin-top: 1.5rem;
            margin-bottom: 1.5rem;
            font-size: 3.5rem;
            line-height: 1;
        }

        .version {
            margin-top: auto;            
            color: #12131a;
            font-size: 2rem;
        }

        .help-button {
            position: absolute;
            bottom: 3rem; /* 与版本号底边对齐 */
            right: 3rem;
            z-index: 100; /* 确保按钮在正确层级 */
            width: 40px;
            height: 40px;
            background: var(--primary);
            color: var(--background);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 2.5rem;
            font-family:  'Segoe UI Semibold','Microsoft YaHei', 'Source Han Sans CN', 'Roboto','Helvetica Neue',sans-serif;
            line-height: 0.5;
            transition: all 0.3s;
        }

        .help-button:hover {
            background: var(--secondary);
            transform: scale(1.1);
        }

        /* 新增帮助弹窗样式 */
        .help-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(7, 8, 11, 0.95);
            display: none; /* 确保初始隐藏 */
            align-items: center;
            justify-content: center;
            z-index: 2000;
            cursor: pointer;
        }

        .help-image {
            width: auto;
		    height: auto;
		    max-width: min(90vw, 1200px);
		    max-height: min(80vh, 1000px);
		    margin: auto;
            border: 2px solid var(--primary);
            border-radius: 10px;
            box-shadow: 0 0 30px rgba(0, 177, 149, 0.3);
        }


        @media (max-width: 1200px) {
            body {
                transform: scale(0.9);
                width: 111%;
            }
        }

        @media (max-width: 1000px) {
            body {
                transform: scale(0.8);
                width: 125%;
            }
        }

        /* 增加移动端媒体查询 */
        @media (orientation: portrait) and (max-width: 768px) {
            body {
                transform: none !important;
                width: 100% !important;
            }
            .help-image {
            width: 95vw; /* 竖屏时使用视口宽度单位 */
            height: auto;
            object-fit: contain;
    }


            
        }

        [data-char="↵"]::after {
            font-family: 'Segoe UI Semibold','Microsoft YaHei', 'Source Han Sans CN', 'Roboto','Helvetica Neue',sans-serif;
            top: -0.2rem;
        }
    </style>
</head>
<body>
    <div class="loading-overlay">
        <div class="status-symbol loading-symbol"></div>
        <div class="status-symbol error-symbol" style="display: none;"></div>
        <button class="status-symbol retry-symbol" style="display: none;"></button>
    </div>

    <div class="left-panel">
        <input type="text" class="display-box" id="display" readonly>
        <div class="keyboard" id="keyboard"></div>
    </div>
    <div class="right-panel">
        <div id="result" class="result-box"></div>
        <div class="version">lokam 1.09</div>
        <div class="help-button">?</div>
    </div>
    <div class="help-overlay" id="helpOverlay">
        <img src="img/help-image.jpg" class="help-image" alt="Höuhu">
    </div>

<script>
const encrypted = 'ew0KICAieGEiOiAieHlzSG1wU3luLCBiSSBreW5kaVN5bnogZk8sIHhpZiB4aXQgaEdweW56IFZlbiIsDQogICJ4QSI6ICJiaWxvTmlOIHRVLCBbcWVuaXRpdiBzSGZpa3NdLCBbeE9kaW55bCBuSG1iWSBzSGZpa3NdIiwNCiAgInhBbiI6ICJ4QWZ0eS4uLiBbdEptXSwgbEt0eSBWeW4uLi4sIHhpbiBmckhudCB4b3YuLi5beEdudGlzaXYgc0hmaWtzXSwgdFUgYmlsb04gdFUiLA0KICAieEFtIjogImJpZk8uLi4gW3RKbV0sIHhZbGkveSBWeW4uLi4sIGJpaEpuZC4uLltwWHN0aXNpdiBzSGZpa3NdIiwNCiAgInhhbSI6ICJGaU4sIHhKdHltIiwNCiAgImJBYiI6ICJmQVZ5IiwNCiAgImJBeGliIjogImJpem55cywgbVljeW50LCBreW1ZU3lsLCB0VSB0cktkIiwNCiAgImJBeGliYW0iOiAia3ltb2RpdGksIHByb2RIa3QiLA0KICAiYkF4aXQiOiAidFUgZkp0IiwNCiAgImJheiI6ICJwbEtzLCBsWGtLU3luLCBweXppU3luLCB0ZXJpdHlyaSIsDQogICJiRSI6ICJzeXBySnppTmxpLCB4R2tzaWRlbnR5bGksIHhJdnluLCB4WG5saSwgc3RpbCwgW3hpbnR5cWVrU3luXSIsDQogICJiRWx1ZCI6ICJiWWQiLA0KICAiYkVsdWRhbU96ZXoiOiAieGVnIiwNCiAgImJFbHVkYXNJeGFuIjogImZlVnkiLA0KICAiYkVsdWRhdGV0IjogIndpTiIsDQogICJiRXN1dCI6ICJndWQsIHdlbCwgcHJvcHksIGt5cmVrdCwgbEhrLCB0VSB4SHBncktkIiwNCiAgImJFc3V0YW4iOiAieGluc0p0LCB0VSB4SG5keXN0R25kIiwNCiAgImJ1YmF6IjogInhJc3QiLA0KICAiYnV6IjogInJKdCIsDQogICJkIjogInRVIHdLdCIsDQogICJkQSI6ICJzS20iLA0KICAiZEFraW1PdCI6ICJ4ZW1weUZpIiwNCiAgImRhYmF6IjogImZlbFgsIGJySFZ5LCBmcmVuZCIsDQogICJkYW1hbSI6ICJuVyIsDQogICJkT2J1cyI6ICJ4R25pbXlsIiwNCiAgImRPYnVzYWhVbGV6IjogImhPbiIsDQogICJkT2J1c2FrdXRhbSI6ICJtSXQgW3hlZHlieWxdIiwNCiAgImRPZyI6ICJoVyIsDQogICJkT2wiOiAiaFUiLA0KICAiZE9tIjogIndvdCIsDQogICJkT21hbSI6ICJ3ZW4iLA0KICAiZE9tVW4iOiAid0oiLA0KICAiZE94dWciOiAidFVsLCBqVXRlbnN5bCIsDQogICJkT3oiOiAid1AiLA0KICAiZFUiOiAiW2t5bXBHcnl0aXYgcHJJZmlrc10iLA0KICAiZ1UiOiAiW3NVcFlseXRpdiBwcklmaWtzXSIsDQogICJkdWJheiI6ICJuT0YiLA0KICAiZHVnIjogImhlZCIsDQogICJkdWdhbGFtIjogIm5layIsDQogICJkdWh1a1VzIjogInhIcHkga2xYVnosIHFHa2l0LCBrWHQiLA0KICAiZHVoVWwiOiAidFUgZmxYdCIsDQogICJkdWhVbGFuIjogInRVIHN3aW0iLA0KICAiZHVrRWhVbCI6ICJrbFdkIiwNCiAgImR1a0V2IjogInNrSiIsDQogICJkdWtFdmFoVWwiOiAicktuIiwNCiAgImR1a0V2YW4iOiAidFUgZmxKIiwNCiAgImR1a0V2aWwiOiAiYmxVIiwNCiAgImR1a0V2b2tJaFVsIjogInNuWCIsDQogICJkdWxhayI6ICJ2WXRpa3lsIiwNCiAgImR1bGFrdWxVbSI6ICJ4ZWxpdkt0eSIsDQogICJkdXNPdCI6ICJnb2QiLA0KICAiZHVzT3RhbSI6ICJmUHJpIHRLbCwgbWlGb2x5cWkiLA0KICAiZHV0IjogInRVIHJKeiIsDQogICJkdXRPayI6ICJ0T2wiLA0KICAiZHV2aWsiOiAiU090IFt2WXRpa3lsXSIsDQogICJkdXZPeiI6ICJ0VSBzdEduZCIsDQogICJkdXoiOiAieEhweSwgeEhwIiwNCiAgInhlIjogImJIdCwgeGVrc2VwdCwgeEhWeSBWeW4sIFtkR3RpdiBzSGZpa3NdLCBbbmVneXRpdiBwcklmaWtzXSIsDQogICJ4ZWQiOiAic2ltaWx5IHRVLi4uW3NlbWJseXRpdiBzSGZpa3NdIiwNCiAgInhlbCI6ICJWR24uLi5ba3ltcEdyeXRpdiBzSGZpa3NdIiwNCiAgInhlaCI6ICJqVXppTi4uLlt4aW5zdHJ5bWVudHlsIHNIZmlrc10iLA0KICAieEUiOiAieHltS3ppTiwgeEhuYmlsSXZ5YnlsLCB4R2JzeWxVdGxpLCBbeGludHlxZWtTeW5dIiwNCiAgInhlbSI6ICJ0VS4uLlt4R2x5dGl2IHNIZmlrc10iLA0KICAieGVuIjogImZyb20uLi5beEdibHl0aXYgc0hmaWtzXSIsDQogICJ4ZXQiOiAieEd0Li4uW2xva3l0aXYgc0hmaWtzXSIsDQogICJ4ZXpBIjogInhpbnksIFt4aW5lc2l2IHNIZmlrc10iLA0KICAieGV6SSI6ICJ4V3RzSmR5LCBzeXJXbmRpTiwgW3h5bEt0aXYgc0hmaWtzXSIsDQogICJmdXNVbiI6ICJ4b2Z5biwgalVaVS95bCwgbk9teWwiLA0KICAiZyI6ICJkalV0aSwgbnlzZXNpdGksIG1Ic3QsIFN1ZCwgbklkIiwNCiAgImdBZCI6ICJ0d2VsdiB0VSBWeSBwVy95IHhvdiBmSnYiLA0KICAiZ0FoVWwiOiAic0ksIHhYU3luIiwNCiAgImdBaFVsYWthdkFsIjogInRKZHlsIiwNCiAgImdBa0FzIjogInRVIGJJIGJPbiIsDQogICJnQWtPbSI6ICJkZUYsIHh5bkoveWxLU3luLCB0VSBkSiwgdFUga2lsIiwNCiAgImdBbCI6ICJtZW5pIiwNCiAgImdBbEF4aXQiOiAieEF0aWt5bCwgdGVrc3QiLA0KICAiZ0Fsb2thbSI6ICJkaWZpa3lsdCwga29tcGxpa0t0aWQiLA0KICAiZ0FtIjogIkZpTmtmSGxJLCBrUGZ5bGkiLA0KICAiZ0FtYW1BbmVtIjogImZ5cmV2eSwgeGl0WW55bCIsDQogICJnQXZhdEFsIjogImJyT2RrQXN0LCBsSnZzckl0IiwNCiAgImdFZCI6ICJ0d2VsdiB0VSBWeSBwVy95IHhvdiBGckkiLA0KICAiZ0lkIjogInR3ZWx2IHRVIFZ5IHBXL3kgeG92IGZPIiwNCiAgImdPZCI6ICJ0d2VsdiIsDQogICJnVWQiOiAidHdlbHYgdFUgVnkgcFcveSB4b3YgdFUiLA0KICAiaCI6ICJ0VSB3b250LCB0VSBoWHAsIHRVIHdpUyIsDQogICJoYWJheiI6ICJ3ZXN0IiwNCiAgImhhYnVnIjogIlNYbGR5IiwNCiAgImhhYnVrIjogImhvcml6b250eWwiLA0KICAiaGFrQXMiOiAieGV2aWR5bnMsIHNpbWJ5bCwgbFhnWCwgbUFrLCBzSm4sIHNpbXB0eW0iLA0KICAiaGF6IjogImxlZnQiLA0KICAiaGF6VWsiOiAiU0ttLCBkaXNncktzIiwNCiAgImhlbCI6ICJ0VSIsDQogICJoZWxBYiI6ICJ0VSBjVXoiLA0KICAiaGVsT3hpbiI6ICJzZWtzIiwNCiAgImhleiI6ICJTS3AsIHN0SmwsIHhpbXByZVN5biwgcEd0eW4iLA0KICAiaElkZW4iOiAic0lrckh0LCB0VSBoSmQsIHRVIGtIdnkgeEhwIiwNCiAgImhpa0FsIjogImxKdCwgYnJKdCwgdFUgU0puIiwNCiAgImhpa0FsYW0iOiAibEdtcCwgbEp0LCBsQW50eW4iLA0KICAiaGlsIjogImtIbFkiLA0KICAiaGlsYWRPeHVnIjogInBLbnRpTiB0VWwsIHBLbnRpTiBickhTLCBwaWdteW50IiwNCiAgImhpbGFrYWtJbiI6ICJmbFcvWSIsDQogICJoaW1FeiI6ICJ4aW1pcSwgcGlrY3ksIGZYdFgsIHRVIHBLbnQiLA0KICAiaGluQXp1bSI6ICJ4aWxla3RyaXNpdGksIHhlbGlrdHJvbmlrLCBGSG5keSIsDQogICJoaW5BenVtYWhpa0FsYW0iOiAieGlsZWt0cmlrIGxKdCIsDQogICJoaW5BenVtYWxBeGl0IjogInByaW50IiwNCiAgImhpdkVudXQiOiAieEdrdGl2aXRpLCBmZXN0aXZ5bCwgc2VyaW15bmksIHhpdmVudCwgcGxHbiIsDQogICJob2dPbCI6ICJkWXRpIiwNCiAgImhvZ09sYW0iOiAidHJHUyIsDQogICJob2wiOiAiaEF0IiwNCiAgImhPeHVoIjogIndLLCBtZUZ5ZCwgbUlueiwgbUhsdGlwbGlrS1N5biBbbUdGXSIsDQogICJodWtVcyI6ICJrbFhWeiIsDQogICJoVWJFc3V0IjogInRVIHdvUyIsDQogICJoVWdBbCI6ICJzb2Z0IiwNCiAgInNJeGFuYWtVeGFnYXQiOiAid1ltIiwNCiAgImhVa0luIjogInNMbCwgcFdkeSwgcEtzdCIsDQogICJoVWt1dCI6ICJ0VSBkcmlOayIsDQogICJoVWwiOiAid090eSIsDQogICJoVWxleiI6ICJ4QWssIGtZdiwga3Jlc3ludCIsDQogICJoVWxlemF0IjogInRVIHRZbiIsDQogICJoVWxzZXoiOiAidFUgZGlnIiwNCiAgImhVc2lsIjogImhBZCIsDQogICJoVXZha0VsIjogInRVIGRpc29sdiIsDQogICJrRXZha0VsIjogInRVIGRpc3BZcyIsDQogICJ4aSI6ICJ4TywgeEpWeSIsDQogICJ4SSI6ICJoWGxkaU4sIGt5bnRLbmlOLCBbeGluc3RyeW1lbnR5bOKAkWtvbWl0S3RpdiBzSGZpa3NdLCBba0FkaW55bCBuSG1iWSBzSGZpa3NdIiwNCiAgInhJbiI6ICJ0VSBoR3YsIHRVIGt5bnRLbiIsDQogICJ4aWtPbCI6ICJiSSwgYkkgeElrd3lsIHRVIiwNCiAgImsiOiAicG9zeWJpbGl0aSwgcHJvYnliaWxpdGksIG1LYkksIG1LLCBrR24iLA0KICAia0EiOiAiW3BBdGlreWwgZk8gcmlnclVwaU4gbUhsdGlweWwgbW9kaWZKL3l6XSIsDQogICJrQWsiOiAiVksiLA0KICAia0FzIjogInhlZ3ppc3R5bnMsIGxKZiwgbGl2aU4sIHRVIHhlZ3ppc3QsIHRVIFNYIHhIcCwgVnkga0hudHJpIHhHbmQgVnkgcGxHbml0IG5LbSBba0FzSF0iLA0KICAia0FzYW1ha2VuIjogInNwcmlOIiwNCiAgImtBc2V6IjogInN0QV9TS3B0LCBTQXAsIEZPbmksIHByaWtsaSIsDQogICJrQXNlemF0IjogInRVIHN0R2IsIHRVIHBBcyBGclUiLA0KICAia0F2aWxhayI6ICJ4eSBncktTeXMgakhOIGtpTiB4b3YgVnkga0hudHJpIGJHayB4aW4gVnkgaGlzdHlyaSwgd1lTaXB0IHhHeiB4eSBnb2QgYkogbEt0eSBxZW55cktTeW56IiwNCiAgImthYkFuIjogImt5bnRLbnksIGJva3MsIGJHZywgYkhraXQsIGJvdHlsLCB0VSBreW50S24sIHRVIHJHcCIsDQogICJrYWsiOiAiaEksIFNJLCB4aXQiLA0KICAia2FrSW4iOiAicGxHbnQiLA0KICAia2FrSW5hbk9rYW0iOiAidHJJIGJyR2MiLA0KICAia2FrSW5hdG90IjogInJVdCIsDQogICJrYWtJbmF6SSI6ICJ0ckkgYkFrIiwNCiAgImtha0luaWwiOiAiZ3JJbiIsDQogICJrYWtJbm9rdXRhbSI6ICJ2ZXFpdHlieWwiLA0KICAia2FsQWQiOiAiYm9kaSIsDQogICJrYWxBZGFoVWwiOiAiYmxIZCIsDQogICJrYWxBZGFrSW4iOiAiYlhuIiwNCiAgImthbEFkYXNJeGFuIjogImhQIFtoZWRdIiwNCiAgImthbEFkYXpBIjogIm1JdCIsDQogICJrYWxBZGF6YW0iOiAiYkdrIiwNCiAgImthbEFkYXphbiI6ICJiZWxpIiwNCiAgImthbEFkYXpJIjogInNraW4iLA0KICAia2FsSXZ1cyI6ICJsSWYiLA0KICAia2F0QW4iOiAibkpmLCB0VSBjb3AsIHRVIHNsR1MiLA0KICAia2F2QWwiOiAidFUgY0tucSwgdFUgYmlrSG0sIGJJIHhJa3d5bCB0VSBbbUdGXSIsDQogICJrYXpJdCI6ICJmclV0IiwNCiAgImthekl0YW1ha2VuIjogInhPdEhtIiwNCiAgImtFIjogIm5YIiwNCiAgImtFaFVsIjogImZvZyIsDQogICJrRWtJbiI6ICJzbVhrIiwNCiAgImtFa3VsVW0iOiAicGxLbiIsDQogICJrRWt1dCI6ICJ0VSBicklWIiwNCiAgImtFdiI6ICJ3aW5kLCB4UCwgdkdralVtIiwNCiAgImtFdmV6IjogInRySi9HTmd5bCIsDQogICJrRXZpbCI6ICJ0ckduc3BHcnludCIsDQogICJrZWhhYnVrIjogInRpbHRpZCBbbm90IGhvcml6b250eWxdIiwNCiAgImtlaGlrQWxhaGV6IjogIlNHZFgiLA0KICAia2VoaWtBbCI6ICJkQWsiLA0KICAia2VoaWtBbGlsIjogImJsR2siLA0KICAia2VoVWt1dCI6ICJ0VSB2b21pdCIsDQogICJrZWhVbGV6IjogInN0ckt0IiwNCiAgImtla0FzZXoiOiAic21VViIsDQogICJrZWtFa3V0IjogInRVIGJsWCIsDQogICJrZWtPbWV6IjogImJIbHEsIHByeXRyVVp5biIsDQogICJrZWt1dCI6ICJ0VSBzcGl0IiwNCiAgImtlbGV2aW0iOiAiaEFmIiwNCiAgImtlbSI6ICJuSEZpTiIsDQogICJrZW4iOiAiZk8iLA0KICAia2VuZXZpbSI6ICJrd090eSIsDQogICJrZXMiOiAiZkp2IiwNCiAgImtlc29oVWwiOiAiZHJKIiwNCiAgImtldiI6ICJGckkiLA0KICAia2V6IjogIm5Yd1AiLA0KICAia0kiOiAiamVzLCB4WGtLIiwNCiAgImtJZ0FsIjogImhldmkiLA0KICAia0loVWwiOiAieEpzIiwNCiAgImtJa3VsVW0iOiAia0EsIGJIcywgdHJLbiIsDQogICJrSW4iOiAic3RYbiwgc29saWQsIHRVIHN5bGlkaWZKIiwNCiAgImtJbmV6IjogImt3b2RyaWxHdHlyeWwsIHNrd1AsIHJvbWJ5cyIsDQogICJrSW5pbCI6ICJqZWxYIiwNCiAgImtJc2FrQW4iOiAiU2VsIiwNCiAgImtJc2lsIjogImxKdCIsDQogICJrSXh1dCI6ICJ4QXQsIHhJc0ZldGlrLCB4QXRpc3RpaywgZGVrcnl0aXYsIGJqVXRpZnlsLCBwcml0aSwga2pVdCIsDQogICJrSXh1dGF0IjogImRBbnMiLA0KICAia0l4dXRhdk94aXMiOiAidFUgc2lOIiwNCiAgImtpayI6ICJ4USwgdFUgbGlzeW4iLA0KICAia2ltT3QiOiAiZklsaU4sIHhpbVhTeW4sIHRVIGZJbCIsDQogICJraXNPayI6ICJwcmluc2lweWwsIHJVbCwgc3RySGtjeSwgc2lzdHltLCBsTyIsDQogICJraXNPa2F2T3hpcyI6ICJyaVZ5bSIsDQogICJrb2wiOiAieEt0IiwNCiAgImtvbVVnIjogInNRcmkveWx6IiwNCiAgImtvbiI6ICJ0ZW4iLA0KICAia09rSW4iOiAidFUgZnJJeiIsDQogICJrT2xhYiI6ICJ0VSBrWC9vcHlyS3QsIHRVIG1HYywgdFUga0FtYkpuLCB0VSBtaWtzIiwNCiAgImtPbSI6ICJzaWtzLCB0VSB2R25pUywgdFUgZGlzeXBRIiwNCiAgImtPbWV6IjogImhYbCwgaG9sWCwga0t2LCBwaXQsIGRpcHJlU3luIiwNCiAgImtPc090IjogInNYbCwgZ1hzdCIsDQogICJrb3MiOiAieGlsZXZ5biIsDQogICJrb3YiOiAibkpuIiwNCiAgImtvdkFzIjogImhvcnksIHRVIGZRIiwNCiAgImtveiI6ICJzZXZ5biIsDQogICJrVSI6ICIgW3BYbHkga3dlc2N5biBwcklmaWtzXSIsDQogICJrdWxPcyI6ICJmR2JyaWsiLA0KICAia3VsVW0iOiAiYlh0LCB2UWt5bCwgeGVsaXZLdHksIGt5bnZLL3kgYmVsdCwgdFUgdHJHbnNwb3J0IiwNCiAgImt1bEV6IjogImtyS3ppLCBzdHJLbnEsIHdRZCIsDQogICJrdXNBbCI6ICJyb3R5biIsDQogICJrdXQiOiAibVdWLCB0VSB4SXQsIHRVIGRyaU5rIiwNCiAgImt1dGFoVWdBbGFtIjogInRITiIsDQogICJrdXRha0luIjogInRVRiwgdFUgYkp0IiwNCiAgImt1dGFtIjogImZVZCIsDQogICJrdXRhbWFsb2thbSI6ICJrd2l6SW4sIGt1a2lOIiwNCiAgImt1dGFtYWxva2FtYWtBaFVrSW4iOiAic0l6eW5pTiIsDQogICJrVXhhZ2F0IjogImJIZywgeGluc2VrdCIsDQogICJrVXhpayI6ICJmQXN0IiwNCiAgImtVeGlrYXNVeiI6ICJzcElkIiwNCiAgImt1elVsIjogImJyWGt5biwgeEhuYkdseW5zdCwgW3N3UCB3WWR6XSIsDQogICJsIjogImxldCwgbUtrIiwNCiAgImxBeGVrIjogImxKaywgeHlwcklTaS9LdCwgeHlkbUoveSwgcHJLeiIsDQogICJsQWdBZCI6ICJ0d2VsdiB0VSBWeSBwVy95IHhvdiB0ZW4iLA0KICAibEF4aXQiOiAickp0aU4sIHhvckZBZ3JIZkksIGtHbGlncnlmaSwgdFUgckp0IiwNCiAgImxhYmF6IjogInNXRiIsDQogICJsYWh1a1VzIjogImJvdHltIGtsWFZ6LCBwQW50cywgdHJXc3l6IiwNCiAgImxha0luIjogInhZRiIsDQogICJsYWtJbmFoaW1FeiI6ICJtR3AiLA0KICAibGFtQXoiOiAiU0dsWCIsDQogICJsYW5BeiI6ICJkSXAiLA0KICAibGF0IjogInRVIGZPbCIsDQogICJsYXZPeiI6ICJ0VSBsSiBkV24iLA0KICAibGF6IjogImJvdHltLCBkV24iLA0KICAibElkYXoiOiAia2lOLCBsSWR5LCB0VSBiSSB4aW4gY0FycSIsDQogICJsSWRhemFnIjogInJML3lsIHBXL3kiLA0KICAibEl2dXMiOiAicEtweSwgcEtxIiwNCiAgImxva2FtIjogIndZaywgcHJvcWVrdCwgdFUgbUtrLCB0VSBrckkvS3QsIHRVIHhpc3RHYmxpUyIsDQogICJsTyI6ICJbeGltcGVyeXRpdiBtVWQsIHhpbXBsSmQgeFlneXRpdiBrS3MgdFUgYkkgW2pVXV0iLA0KICAibE94YWQiOiAiclhkLCBwR0YsIHdLLCBwR3NpcSwgdHJHaywgeE9iaXQiLA0KICAibFUiOiAiW3hpbXBlcnl0aXYgbVVkLCB4aW1wbEpkIHhHYnN5bFV0aXYga0tzIHRVIGJJIFtqVV1dIiwNCiAgIm0iOiAiRk90LCB0VSBGaU5rLCB0VSBtZW15cmksIHRVIG1pcyIsDQogICJtQSI6ICJWaXMsIFZJeiIsDQogICJtQWwiOiAid0kgW2ZZc3RdIiwNCiAgIm1BbSI6ICJtSFZZIiwNCiAgIm1BeiI6ICJuUSwgdFUgc3RpaywgdFUgcEtzdCwgdFUgeHl0ckdrdCIsDQogICJtQXphc1V6IjogImRpc3R5bnMiLA0KICAibWFnQWwiOiAieFhsZCIsDQogICJtYWdBbGFtIjogInhZbGkveXN0LCB4R3QgZllzdCIsDQogICJtYWdBbGFuIjogImxLdHlzdCwgeEd0IGxBc3QiLA0KICAibWFnQWxhdk94aXMiOiAic3RPcmkiLA0KICAibWFoVWwiOiAibUhuRiIsDQogICJtYWtBcyI6ICJqUSIsDQogICJtYWtBc2FzVXoiOiAieEtxIiwNCiAgIm1ha2FrIjogIndJIFtmWXN0LCBGWWRdIiwNCiAgIm1ha2VoaWtBbCI6ICJuSnQiLA0KICAibWFrZW4iOiAic0l6eW4iLA0KICAibWFrb3oiOiAid0lrIiwNCiAgIm1hbCI6ICJ4SiIsDQogICJtYWxBdiI6ICJsSHYiLA0KICAibWFtQW4iOiAiZmpVY3kiLA0KICAibWFtYW4iOiAiVmVuLCB4QWZ0eSBWZW4iLA0KICAibWFtZXQiOiAieEd0IFZpcyBtWG15bnQiLA0KICAibWFtT3oiOiAiZEsiLA0KICAibWFuYWwiOiAid0kgW2ZZc3QsIHNla0huZF0iLA0KICAibWFzSW4iOiAibXlTSW4iLA0KICAibWFzaWwiOiAibmpVIiwNCiAgIm1hdG9sSXhvcyI6ICJwaXJJL0FkaWssIHhpdHlyeXRpdiwgbFVwLCBmckdrdHlsLCBzZWxmX3JlZnJ5bnMiLA0KICAibWF6IjogImhRIiwNCiAgIm1hekl2IjogImJXbmR5cmksIHhlbmtXbnR5LCB4WHZ5bEdwaU4sIHRVIG1JdCwgdFUga0FudEdrdCwgdFUgeGludHlzZWt0IiwNCiAgIm1lelVsIjogInJQLCBub3QgeG9mSG4iLA0KICAibUlsdWsiOiAiYnJlc3QiLA0KICAibWlrIjogIlNPdCIsDQogICJtaWwiOiAieEosIHRVIHNJLCB0VSB3b2MiLA0KICAibWlsYWtPbWV6IjogIndpbmRYIiwNCiAgIm1vbCI6ICJzSG13b24iLA0KICAibW9tIjogInNIbUZpTiIsDQogICJtT3oiOiAiZkoveSwgZmxLbSwgdFUgYlluIiwNCiAgIm1PemV6IjogInJXbmQsIHNZa3lsLCBzZlEiLA0KICAibU96ZXphdCI6ICJyWHRLdCIsDQogICJtT3plemF2dWxBdCI6ICJkaXNrIiwNCiAgIm1PemlsIjogInJlZCIsDQogICJtT3pvZ2FtIjogInhHU2l6IiwNCiAgIm1vdCI6ICJicktuIiwNCiAgIm1vdGVkYW1hc0luIjogImt5bXBqVXR5IiwNCiAgIm1veiI6ICJzSG13UCIsDQogICJuIjogIm5vbGlxLCB0VSBuWCwgYkkgeEtieWwgdFUiLA0KICAibkEiOiAiVkd0LCBWWHoiLA0KICAibkFsIjogImpVIFtwbE9yeWxdIiwNCiAgIm5BbSI6ICJuS20iLA0KICAibkFtYW0iOiAibEtieWwiLA0KICAibkF6IjogImZBLCBkaXN0eW50IiwNCiAgIm5hbCI6ICJqVSBbc2lOZ2p1bHldIiwNCiAgIm5hdGVuSWwiOiAic3RIZGksIHhlcVVrS1N5biwgdFUgc3RIZGksIHRVIGxZbiwgdFUgZ2V0IG5vbGlxIiwNCiAgIm5heiI6ICJWUCIsDQogICJuSSI6ICJuWHosIHRVIHNtZWwiLA0KICAibkl4YW4iOiAia0d0IiwNCiAgIm5PaFVsIjogInJpdlkiLA0KICAibk9rIjogImxvTiIsDQogICJuT2thbSI6ICJzdGlrIiwNCiAgInhvIjogInhHbmQiLA0KICAieE8iOiAid2lWLi4uW2tvbWl0S3RpdiBzSGZpa3NdIiwNCiAgInhvYkFiIjogImtvbWl0LCBtSXRpL3kiLA0KICAieG9oVWwiOiAibVVuIiwNCiAgInhvbUFtIjogInN0QSwgeHlzdHJ5bm9taWt5bCB4SGJxZWt0IiwNCiAgInhvbUFtYXNJc3V0IjogImtvbnN0aWxLU3luLCBnR2x5a3NpIiwNCiAgInhvbU96IjogInNIbiIsDQogICJ4b21PemFzSXN1dCI6ICJzWGx5IHNpc3R5bSIsDQogICJ4b3oiOiAid29uIiwNCiAgInMiOiAieHl0ZW1wdCwgdFUgdHJKIiwNCiAgInNBeGluIjogIndLdiwgZmxIa2NVL0tTeW4sIFNLaywgdkpicktTeW4sIHBIbHMsIGJsaU5rLCBzSm4gd0t2IiwNCiAgInNBeGl2IjogIm1IbmksIHdlbEYsIGJpbG9OaU56LCBwcmVTeXMgbWV0eWwiLA0KICAic2FnQXMiOiAidFUgc1ljLCB0VSBmSm5kLCB0VSBoSG50IiwNCiAgInNha0FuIjogImZpUyIsDQogICJzYWtha0luIjogImZvcmlzdCIsDQogICJzYWxJdnVzIjogImJ1ayIsDQogICJzYXoiOiAieE9sIiwNCiAgInNJeGFuIjogIndKL3ksIGxKbiwgYk9keSwgaFAsIHRVIGxpTmsiLA0KICAic0l4YW5hbSI6ICJyWHAiLA0KICAic0l4YW5hdG9rQWciOiAic25LayIsDQogICJzSXN1dCI6ICJnclVwLCBrbEhzdHksIGJIbmMsIHh5a2pVbWp1bEtTeW4sIHRVIGdHVnksIHRVIGtBbGVrdCIsDQogICJzaWtBcyI6ICJ3S2ssIHhYcHluLCBzdEF0IiwNCiAgInNpa09tIjogInNsSXAsIGtsWHMsIHN0b3AiLA0KICAic2lrT21lekEiOiAiZHJJbSIsDQogICJzSWt1biI6ICJ4eSB3UWQgZ0oiLA0KICAic2lsIjogImZqVSIsDQogICJzaWxBeGl0IjogImtHcmlrdHksIGxldHksIGdsaWYiLA0KICAic2lsYW1hbWFtT3oiOiAiamVzdHlkSyIsDQogICJzaWxhbiI6ICJuZWtzdCIsDQogICJzaWxhbmFtYW1PeiI6ICJ0eW1vclgiLA0KICAic2lsb2thbSI6ICJzaW1weWwsIHhJemkiLA0KICAic2l2T3hpcyI6ICJzZW50eW5zLCBzdEt0bXludCIsDQogICJzb2JBIjogInNvbHQiLA0KICAic29oVWwiOiAid2V0IiwNCiAgInNva09tIjogImtYbGQiLA0KICAic29rT21hbWFrZW4iOiAid2ludHkiLA0KICAic29tQXoiOiAiZ3JHdml0aSwgeHl0ckdrU3luIiwNCiAgInNvbU96IjogImhvdCwgaEl0IiwNCiAgInNvbU96YW1ha2VuIjogInNIbXkiLA0KICAic29uSSI6ICJzbWVsIiwNCiAgInNPeGlrIjogInNsWCIsDQogICJzT3QiOiAiaGpVbXluLCBtR24sIHBZc3luIiwNCiAgInNPdGFiYXoiOiAia0hudHJpLCBzdEt0LCB0ckpiLCB0ZXJpdHlyaSIsDQogICJzb3ZPeGlzIjogImZYbkltIiwNCiAgInNvemFuQW0iOiAid1lkLCBtT2ZJbSIsDQogICJzdW1FbCI6ICJoV3MsIGhYbSwgdFUgbEp2IiwNCiAgInNVeiI6ICJuSG1iWSwgeHltV250LCBkaXFpdCwgbWVaeW15bnQsIHRVIGtXbnQsIHRVIG1lWnksIHRVIGt3b250aWZKIiwNCiAgInN1dkl0IjogInN3SXQsIGtHbmRpIiwNCiAgInQiOiAidFUgd09rLCB0VSBtVXYsIGJJIGdYL2lOIHRVIGRVIiwNCiAgInRha09tZXoiOiAiZE8iLA0KICAidGFuT3MiOiAiaEdwaW55cywgZkhuLCB0VSBwbEsiLA0KICAidGFuT3Nhdk94aXMiOiAidFUgbEFmIiwNCiAgInRlZyI6ICJmaU5neSwgdFUgcExudCIsDQogICJ0ZWdhbiI6ICJmaU5neXRpcCwgVkkgeGVuZCB4b3YgeHkgZmlOZ3kiLA0KICAidGVnQWwiOiAic0htIiwNCiAgInRlZ2FrSW4iOiAiZmlOZ3luS2wiLA0KICAidGVuSWwiOiAidFUgZ2V0LCB0VSBnS24sIHRVIHJpc0l2LCB4eWRpU3luIFttR0ZdIiwNCiAgInRldCI6ICJoR25kLCB0VSB0SGMiLA0KICAidGV0YW1hc0luIjogIm1YYkhsIGZYbnosIHNtQXQgZlhueiwgdEhjaU4gbXlTSW56IiwNCiAgInRldGF6QSI6ICJwQW0iLA0KICAidGV0ZXpBIjogInRVIGhYbGQiLA0KICAidGlnQXh1biI6ICJ4SFZ5LCBkaWZyeW50IiwNCiAgInRpa0FsIjogInBXL3ksIHN0cm9OLCBwVy95ZnlsIiwNCiAgInRva0FnIjogInJlcHRKbHoiLA0KICAidG9uQWwiOiAic0pkLCBiaXNKZCwgblFiSiwgYkkgd2lWIiwNCiAgInRPaFVrdXQiOiAidFUgc0hrIiwNCiAgInRPaFVsIjogImxLayIsDQogICJ0T2siOiAiYmlnLCB0VSBzd2VsIiwNCiAgInRPa2FrSW4iOiAidHJJIiwNCiAgInRPa0luIjogIm1XbnRpbiIsDQogICJ0T21pc0VsYSI6ICJWeSBwclh0R2d5bmlzdCIsDQogICJ0T3RldCI6ICJ0VSBoaXQiLA0KICAidE90ZXRlekEiOiAidFUgc2t3SXoiLA0KICAidG90IjogImZ1dCwgbGVnIiwNCiAgInRvdGFrQXNleiI6ICJuSSIsDQogICJ0b3Rha3VsVW0iOiAiYkpzaWt5bCIsDQogICJ4dSI6ICJzWCIsDQogICJ4VW0iOiAidFUgVkd0IHJpekhsdCBiSiBkVS9pTiwgW3RyR25zbEt0aXYgc0hmaWtzXSIsDQogICJ4VW4iOiAiZk8gVkd0IHJJenluIFZlbiwgW2tPenlsIHNIZmlrc10iLA0KICAidkEiOiAiW3BBdGlreWwgZk8geHl0cmlianl0aXYga2xPel0iLA0KICAidkF0aWsiOiAicEF0aWt5bCwgeGVsaW1lbnR5cmkgcEF0aWt5bCwgbUprclgiLA0KICAidmFrRWwiOiAidFUgYnJLaywgdFUga0h0LCB0VSBzcGxpdCIsDQogICJ2YXRBbCI6ICJ0VSBnaXYsIHRVIHNwcmVkLCB0VSBwQXMsIHRVIGRpc2tBcmQsIHNIYnRyR2tTeW5bbUdGXSIsDQogICJ2RWt1dCI6ICJkSnJla1N5biwgeEdOZ3lsLCB2ZWt0eSIsDQogICJ2aWhVbCI6ICJkcm9wIiwNCiAgInZpayI6ICJzbU9sLCB4eSBiaXQsIHh5IGxpdHlsLCB0VSBTcmlOayIsDQogICJ2aWtha0luIjogImdyQXMiLA0KICAidmlrRWtJbiI6ICJkSHN0IiwNCiAgInZpa0luIjogInNHbmQiLA0KICAidmlrdXNBbCI6ICJ4R3NpZCwgc1cveSIsDQogICJ2aXNvbU96IjogIndPbSIsDQogICJ2aXNPdCI6ICJjSmxkLCBraWQiLA0KICAidk8iOiAiW3BBdGlreWwgZk8gblduIGtsT3ogeG92IHhZZ3l0aXYga0tzXSIsDQogICJ2T3hpcyI6ICJzV25kLCBzcElrLCB2THMsIHRPaywgbFdkLCB0VSBzSywgdFUgc1duZCIsDQogICJrZXZPeGlzIjogImt3Si95dCwgc0pseW5zIiwNCiAgInZPeGlzYWRPeHVnIjogImJlbHosIHh5bEFteiwgc3BJa3l6LCBtSmtyeWZYbiIsDQogICJ2T3hpc2FtT3plemF2dWxBdCI6ICJyZWtZZCwgZm9ueWdyR2YgcmVrWWQiLA0KICAidk9zdXQiOiAiYkdkIiwNCiAgInZPeiI6ICJ0VSBwdXQsIHRVIGxYa0t0LCB0VSBrSXAsIHRVIHByeXRla3QiLA0KICAidlUiOiAiW3BBdGlreWwgZk8gblduIGtsT3ogeG92IHhHYnN5bFV0aXYga0tzXSIsDQogICJ2dWxBdCI6ICJmbE8sIHBsS24sIGZsR3QiLA0KICAidnVsQXRhbE94YWQiOiAic3RQIiwNCiAgInZVeGFuIjogImRvZyIsDQogICJ6QWtBcyI6ICJqVW5pdllzIiwNCiAgInpBbWFtIjogInRKbSIsDQogICJ6YWhpa0FsaWwiOiAid0p0IiwNCiAgInphaGlrQWxpbGFzQXhpdiI6ICJzaWx2eSIsDQogICJ6YW0iOiAieFlsaS95LCBwQXN0LCBiaWhKbmQsIHJRLCBiR2siLA0KICAiemFtYW1hbU96IjogIm1PbmlOIiwNCiAgInphbWFzSXhhbmFtIjogInRLbCIsDQogICJ6YW1hdGV0IjogInRVIHB1bCIsDQogICJ6YW4iOiAibEt0eSwgZmpVY3ksIHh5aGVkLCBmckhudCIsDQogICJ6YW5BbSI6ICJsR05nd2lxIiwNCiAgInphbmFtYW1PeiI6ICJ4R2Z0WW5VbiIsDQogICJ6YW5hdGV0IjogInRVIHB1UyIsDQogICJ6ZWQiOiAic2ltaWx5LCBsSmt3SnosIHJpcGV0aXRpdiwgeHlnZW4sIHhvbHNYLCB0VSIsDQogICJ6ZXRhbWFtT3oiOiAiblVuIiwNCiAgInpldGF2T3oiOiAidFUgc2l0IiwNCiAgInpJeGV0T2siOiAiRmlrIiwNCiAgInpJeGV2aWsiOiAiRmluIiwNCiAgInppc0l4YWsiOiAibUdnbml0LCBtR2duZXRpayINCn0='; 
const wordDB = JSON.parse(atob(encrypted));

// 字体加载检测
async function checkFontLoaded() {
    const font = new FontFace('Kiineza', 'url(fonts/Kiineza_Laaitu.woff2)');
    try {
        await font.load();
        document.fonts.add(font);
        await document.fonts.ready;
        if (!document.fonts.check('16px Kiineza')) throw new Error();
        document.body.classList.add('fonts-loaded');
        document.querySelector('.loading-overlay').style.display = 'none';
    } catch {
        showErrorState();
    }
}

function showErrorState() {
    const overlay = document.querySelector('.loading-overlay');
    overlay.querySelector('.loading-symbol').style.display = 'none';
    overlay.querySelector('.error-symbol').style.display = 'block';
    overlay.querySelector('.retry-symbol').style.display = 'block';
}

document.querySelector('.retry-symbol').addEventListener('click', () => location.reload());
setTimeout(() => !document.body.classList.contains('fonts-loaded') && showErrorState(), 8000);

// 键盘初始化
const keyboardLayout = [
    ['v', 'b', 'm'],
    ['t', 'd', 'n'],
    ['s', 'z', 'l'],
    ['k', 'g', 'h'],
    ['o', 'u', 'e'],
    ['i', 'a', 'O'],
    ['U', 'E', 'I'],
    ['A', '×', '↵']
];
function initKeyboard() {
    const keyboard = document.getElementById('keyboard');
    keyboardLayout.forEach(column => {
        const colDiv = document.createElement('div');
        colDiv.className = 'key-column';
        column.forEach(char => {
            const key = document.createElement('div');
            key.className = `key ${'AEIOUaeiou'.includes(char) ? 'vowel-key' : ''}`;
            key.dataset.char = char;
            key.addEventListener('click', () => handleKeyPress(char));
            colDiv.appendChild(key);
        });
        keyboard.appendChild(colDiv);
    });
}

// 输入处理逻辑
function processInput(str) {
    const consonants = new Set(['x','v','b','m','t','d','n','s','z','l','k','g','h']);
    let output = [];
    
    for(let i = 0; i < str.length; i++) {
        const current = str[i];
        if ('AEIOUaeiou'.includes(current)) {
            if(i === 0 || !consonants.has(str[i-1].toLowerCase())) {
                output.push('x');
            }
        }
        output.push(current);
    }
    return output.join('');
}

function handleKeyPress(char) {
    const display = document.getElementById('display');
    
    if(char === '×') {
        display.value = '';
        document.getElementById('result').innerHTML = '';
    } else if(char === '↵') {
        const resultDiv = document.getElementById('result');
        resultDiv.innerHTML = display.value ? 
            (wordDB[display.value] ? 
                `<div>${display.value}</div><div class="translation" style="color: var(--primary)">${wordDB[display.value]}</div>` :
                '<div class="translation">mA sozanAm/u xekAs/i.</div>'
            ) : '<div class="translation">naz/o kem/u xIn/ok/i.</div>';
    } else {
        display.value += char;
        display.value = processInput(display.value);
    }
}

document.querySelector('.help-button').addEventListener('click', function(e) {
    e.stopPropagation();
    const overlay = document.getElementById('helpOverlay');
    overlay.style.display = 'flex';
});

document.getElementById('helpOverlay').addEventListener('click', function() {
    this.style.display = 'none';
});

// 初始化
window.addEventListener('DOMContentLoaded', () => {
    initKeyboard();
    checkFontLoaded();
});
</script>
</body>
</html>
